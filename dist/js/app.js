(function(){"use strict";var e={1282:function(e,t,n){var r=n(9242),o=n(4940),i=n(3396),s=n(9574);const a={id:"app",class:"container"},l={class:"row justify-content-center align-items-center py-3 py-md-5"},c={class:"content col-xl-8 col-lg-10 col-12 p-3 px-md-5 py-md-4 rounded"},u=(0,i._)("div",{class:"text-center"},[(0,i._)("img",{src:s,alt:"Azuriom logo",class:"logo mb-4"})],-1);function d(e,t,n,r,o,s){const d=(0,i.up)("AzuriomInstaller");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",l,[(0,i._)("div",c,[u,(0,i.Wm)(d)])])])}var h=n(7139);const p={class:"text-center"},m=["innerHTML"],g={key:0,class:"d-flex flex-column align-items-center justify-content-center",style:{height:"300px"}},f=(0,i._)("div",{class:"spinner-border spinner-border-lg text-primary mb-3"},null,-1),w=(0,i._)("hr",null,null,-1),v={class:"text-center"},b=["innerHTML"];function x(e,t,n,o,s,a){const l=(0,i.up)("requirements"),c=(0,i.up)("download"),u=(0,i.up)("flag-english"),d=(0,i.up)("flag-french");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h1",p,(0,h.zw)(e.$t("title")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.errors,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"alert alert-danger",role:"alert"},[(0,i.Uk)((0,h.zw)(t)+" ",1),t.startsWith("cURL error 60:")?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:e.$t("help.cUrl60",{path:e.phpIniPath})},null,8,m)):(0,i.kq)("",!0)])))),128)),(0,i.Wm)(r.uT,{name:"fade",mode:"out-in"},{default:(0,i.w5)((()=>[e.preLoading?((0,i.wg)(),(0,i.iD)("div",g,[f,(0,i._)("h2",null,(0,h.zw)(e.$t("loading")),1)])):"requirements"===e.step?((0,i.wg)(),(0,i.j4)(l,{key:1,data:e.data,loading:e.loading,onReload:e.reloadPage,onRefresh:e.refreshRequirements,onNext:e.showDownload},null,8,["data","loading","onReload","onRefresh","onNext"])):"download"===e.step?((0,i.wg)(),(0,i.j4)(c,{key:2,loading:e.loading,onDownload:e.download,onError:e.handleAxiosError},null,8,["loading","onDownload","onError"])):(0,i.kq)("",!0)])),_:1}),w,(0,i._)("footer",v,[(0,i.Wm)(u,{onClick:t[0]||(t[0]=t=>e.setLocale("en"))}),(0,i.Wm)(d,{onClick:t[1]||(t[1]=t=>e.setLocale("fr"))}),(0,i._)("p",{class:"mb-0",innerHTML:e.$t("copyright",{year:(new Date).getFullYear()})},null,8,b)])])}var z=n(6265),k=n.n(z);const y=k().create({baseURL:window.location.href,headers:{"X-Requested-With":"XMLHttpRequest"}});function q(){return y.get("")}function L(){return y.post("",{action:"download"})}const _={class:"text-center"},$=["innerHTML"],H={key:0,class:"spinner-border spinner-border-sm"};function M(e,t,n,r,o,s){const a=(0,i.up)("BIconCloudDownload");return(0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("h2",null,(0,h.zw)(e.$t("download.title")),1),(0,i._)("p",{innerHTML:e.$t("download.legal")},null,8,$),(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.download&&e.download(...t)),class:"btn btn-primary"},[(0,i.Wm)(a),(0,i.Uk)(" "+(0,h.zw)(e.$t("download.go"))+" ",1),e.loading?((0,i.wg)(),(0,i.iD)("span",H)):(0,i.kq)("",!0)])])}var C=n(6060),D=(0,i.aZ)({name:"DownloadView",components:{BIconCloudDownload:C.rvl},props:{loading:Boolean},methods:{download(){this.$emit("download")}}}),R=n(89);const A=(0,R.Z)(D,[["render",M]]);var V=A;const I=["innerHTML"],P={key:0},T={class:"list-group mb-3 requirements"},B={class:"row"},E={class:"col-10"},j={key:0,class:"col-2"},U=["title"],O={key:1,class:"col-2 fs-5"},W={key:2,class:"col-md-12 px-4 mt-2"},Z={class:"text-primary me-1"},Y=["innerHTML"],F={class:"alert alert-danger"},S={class:"text-center"},N=["disabled"],X={key:0,class:"spinner-border spinner-border-sm"},K={key:1,class:"text-center text-success"};function G(e,t,n,r,o,s){const a=(0,i.up)("BIconCheckLg"),l=(0,i.up)("BIconXLg"),c=(0,i.up)("BIconInfoCircle"),u=(0,i.up)("BIconExclamationTriangle"),d=(0,i.up)("BIconArrowClockwise"),p=(0,i.up)("BIconArrowRight");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("p",{innerHTML:e.$t("welcome"),class:"text-center"},null,8,I),e.data.compatible?((0,i.wg)(),(0,i.iD)("div",K,[(0,i._)("p",null,(0,h.zw)(e.$t("requirements.success")),1),(0,i._)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextStep&&e.nextStep(...t)),class:"btn btn-primary rounded-pill mx-1"},[(0,i.Uk)((0,h.zw)(e.$t("continue"))+" ",1),(0,i.Wm)(p)])])):((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.data.requirements,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{key:n,class:"list-group-item"},[(0,i._)("div",B,[(0,i._)("div",E,(0,h.zw)(e.translateRequirement(n)),1),"php"===n?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("span",{class:(0,h.C_)(["float-end",t?"text-success":"text-danger"]),title:e.data.phpFullVersion},(0,h.zw)(e.data.phpVersion),11,U)])):((0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("span",{class:(0,h.C_)([t?"text-success":"text-danger","float-end"])},[t?((0,i.wg)(),(0,i.j4)(a,{key:0})):(0,i.kq)("",!0),t?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(l,{key:1}))],2)])),t||"php"===n?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("span",Z,[(0,i.Wm)(c)]),(0,i._)("span",{innerHTML:e.translateRequirementHelp(n)},null,8,Y)]))])])))),128))]),(0,i._)("div",F,[(0,i.Wm)(u),(0,i.Uk)(" "+(0,h.zw)(e.$t("requirements.missing")),1)]),(0,i._)("div",S,[(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.refreshRequirements&&e.refreshRequirements(...t)),disabled:e.loading,class:"btn btn-secondary mx-1"},[(0,i.Wm)(d),(0,i.Uk)(" "+(0,h.zw)(e.$t("requirements.recheck"))+" ",1),e.loading?((0,i.wg)(),(0,i.iD)("span",X)):(0,i.kq)("",!0)],8,N)])]))])}var J=(0,i.aZ)({name:"RequirementsView",components:{BIconArrowClockwise:C.zI9,BIconArrowRight:C.cKx,BIconCheckLg:C.COp,BIconInfoCircle:C.gjx,BIconExclamationTriangle:C.Sbj,BIconXLg:C.hOD},props:{loading:Boolean,data:{type:Object,required:!0}},methods:{refreshRequirements(){this.$emit("refresh")},nextStep(){this.data.extracted?setTimeout((()=>this.$emit("reload"))):this.$emit("next")},translateRequirementHelp(e){if(e.startsWith("extension-")){const e=this.data.phpVersion;return this.$t("requirements.help.extension",{command:`apt install curl php${e}-mysql php${e}-pgsql php${e}-sqlite php${e}-bcmath php${e}-mbstring php${e}-xml php${e}-curl php${e}-zip php${e}-gd`})}return e.startsWith("function-")?this.$t("requirements.help.function"):"writable"===e?this.$t("requirements.help.writable",{command:`chmod -R 755 ${this.data.path} && chown -R www-data:www-data ${this.data.path}`}):"writable"!==e||this.data.htaccess?this.$t(`requirements.help.${e}`):this.$t("requirements.help.htaccess")},translateRequirement(e){return e.startsWith("extension-")?this.$t("requirements.extension",{extension:e.replace("extension-","")}):e.startsWith("function-")?this.$t("requirements.function",{function:e.replace("function-","")}):this.$t(`requirements.${e}`,{version:this.data.minPhpVersion})}}});const Q=(0,R.Z)(J,[["render",G]]);var ee=Q;const te={class:"btn btn-link p-0 mb-1 mx-1",title:"English"},ne=(0,i.uE)('<svg class="locale-flag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#00247d" d="M0 9.059V13h5.628zM4.664 31H13v-5.837zM23 25.164V31h8.335zM0 23v3.941L5.63 23zM31.337 5H23v5.837zM36 26.942V23h-5.631zM36 13V9.059L30.371 13zM13 5H4.664L13 10.837z"></path><path fill="#cf1b2b" d="M25.14 23l9.712 6.801c.471-.479.808-1.082.99-1.749L28.627 23H25.14zM13 23h-2.141l-9.711 6.8c.521.53 1.189.909 1.938 1.085L13 23.943V23zm10-10h2.141l9.711-6.8c-.521-.53-1.188-.909-1.937-1.085L23 12.057V13zm-12.141 0L1.148 6.2C.677 6.68.34 7.282.157 7.949L7.372 13h3.487z"></path><path fill="#eee" d="M36 21H21v10h2v-5.836L31.335 31H32c1.117 0 2.126-.461 2.852-1.199L25.14 23h3.487l7.215 5.052c.093-.337.158-.686.158-1.052v-.058L30.369 23H36v-2zM0 21v2h5.63L0 26.941V27c0 1.091.439 2.078 1.148 2.8l9.711-6.8H13v.943l-9.914 6.941c.294.07.598.116.914.116h.664L13 25.163V31h2V21H0zM36 9c0-1.091-.439-2.078-1.148-2.8L25.141 13H23v-.943l9.915-6.942C32.62 5.046 32.316 5 32 5h-.663L23 10.837V5h-2v10h15v-2h-5.629L36 9.059V9zM13 5v5.837L4.664 5H4c-1.118 0-2.126.461-2.852 1.2l9.711 6.8H7.372L.157 7.949C.065 8.286 0 8.634 0 9v.059L5.628 13H0v2h15V5h-2z"></path><path fill="#cf1b2b" d="M21 15V5h-6v10H0v6h15v10h6V21h15v-6z"></path></svg>',1),re=[ne];function oe(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("button",te,re)}var ie=(0,i.aZ)({name:"flag-en"});const se=(0,R.Z)(ie,[["render",oe]]);var ae=se;const le={class:"btn btn-link p-0 mb-1 mx-1",title:"Français"},ce=(0,i._)("svg",{class:"locale-flag",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},[(0,i._)("path",{fill:"#ed2939",d:"M36 27c0 2.209-1.791 4-4 4h-8V5h8c2.209 0 4 1.791 4 4v18z"}),(0,i._)("path",{fill:"#002495",d:"M4 5C1.791 5 0 6.791 0 9v18c0 2.209 1.791 4 4 4h8V5H4z"}),(0,i._)("path",{fill:"#eee",d:"M12 5h12v26H12z"})],-1),ue=[ce];function de(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("button",le,ue)}var he=(0,i.aZ)({name:"flag-fr"});const pe=(0,R.Z)(he,[["render",de]]);var me=pe,ge=(0,i.aZ)({name:"AzuriomInstaller",components:{FlagEnglish:ae,FlagFrench:me,Download:V,Requirements:ee},data(){return{preLoading:!0,loading:!1,errors:[],step:"requirements",data:null}},computed:{phpIniPath(){return this.data&&this.data.phpIniPath?this.data.phpIniPath:this.$t("unknown")}},mounted(){this.refreshRequirements()},methods:{async refreshRequirements(){this.errors=[],this.loading=!0;try{const e=await q();if(!e.data.requirements)return this.addError(this.$t("error",{error:"No data in response"})),this.step="error",void(this.preLoading=!1);this.data=e.data,this.loading=!1}catch(e){this.handleAxiosError(e)}this.preLoading=!1},showDownload(){this.step="download"},async download(){this.errors=[],this.loading=!0;try{await L(),setTimeout((()=>{this.loading=!1,this.reloadPage()}),750)}catch(e){this.handleAxiosError(e)}},handleAxiosError(e){this.loading=!1,this.preLoading&&(this.step="error"),e.response&&e.response.data&&e.response.data.message?this.addError(e.response.data.message):this.addError(this.$t("error",{error:e}))},addError(e){this.errors.push(e)},setLocale(e){this.$i18n.locale=e},reloadPage(){window.location.reload(!0)}}});const fe=(0,R.Z)(ge,[["render",x]]);var we=fe,ve=(0,i.aZ)({name:"App",components:{AzuriomInstaller:we}});const be=(0,R.Z)(ve,[["render",d]]);var xe=be,ze={title:"Installation",loading:"Loading...",continue:"Continue",error:"An error occurred: {error}",welcome:"Azuriom is the <strong>next generation</strong> game CMS, it's <strong>free</strong> and <strong>open-source</strong>, and is a <strong>modern, reliable, fast and secure</strong> alternative to existing CMS so you can have the <strong>best web experience possible</strong>.",copyright:'Copyright &copy; 2019-{year} <a href="https://azuriom.com" target="_blank" rel="noopener noreferrer">Azuriom</a> - All rights reserved.',unknown:"Unknown",help:{cUrl60:'You can follow the steps in the <a href="https://azuriom.com/docs/faq" target="_blank" rel="noopener noreferrer">documentation</a> to solve this issue. Path of the the php.ini: <code>{path}</code>'},requirements:{php:"PHP {version} or higher",writable:"Write permission",rewrite:"URL rewrite enabled",extension:"Extension {extension}",function:"Function {function} enabled",help:{writable:"You can try this command to grant write permission: <code>{command}</code>.",rewrite:'You can follow the instructions in <a href="https://azuriom.com/docs/installation" target="_blank" rel="noopener noreferrer">our documentation</a> to enable URL rewriting.',htaccess:"The file <code>.htaccess</code> or <code>public/.htaccess</code> is missing. Make sure you have enabled hidden files and that the file is present.",extension:"You can try this command to install the missing PHP extensions: <code>{command}</code>.<br>Once done, restart Apache or Nginx.",function:"You need to enable this function in the php.ini file of PHP by editing the value of <code>disable_functions</code>."},missing:"Your server doesn't have the necessary requirements to install Azuriom.",recheck:"Recheck",success:"Your server has the prerequisites to install Azuriom, you can continue the installation !"},download:{title:"Download",legal:'By continuing the installation, you accept <a href="https://azuriom.com/terms" target="_blank" rel="noopener noreferrer">Azuriom\'s TOS</a>.',go:"Download"}},ke={title:"Installation",loading:"Chargement...",continue:"Continuer",error:"Une erreur est survenue : {error}",welcome:"Azuriom est un CMS de jeux <strong>dernière génération</strong>, <strong>gratuit et open-source</strong>, qui a pour objectif d'être une alternative <strong>moderne, fiable, rapide et sécurisée</strong> par rapport aux CMS existants afin de vous proposer <strong>la meilleure expérience web</strong> possible pour votre serveur.",copyright:'Copyright &copy; 2019-{year} <a href="https://azuriom.com" target="_blank" rel="noopener noreferrer">Azuriom</a> - Tous droits réservés.',unknown:"Inconnu",help:{cUrl60:'Vous pouvez suivre les étapes dans la <a href="https://azuriom.com/docs/faq" target="_blank" rel="noopener noreferrer">documentation</a> pour corriger ce problème. Chemin du fichier php.ini : <code>{path}</code>'},requirements:{php:"PHP {version} ou plus récent",writable:"Droits en écriture",rewrite:"Réécriture d'URL activée",extension:"Extension {extension}",function:"Fonction {function} activée",help:{writable:"Vous pouvez essayer de faire cette commande pour autoriser l'écriture : <code>{command}</code>.",rewrite:'Vous pouvez suivre les instructions dans <a href="https://azuriom.com/docs/installation" target="_blank" rel="noopener noreferrer">notre documentation</a> pour activer la réécriture d\'URL.',htaccess:"Le fichier <code>.htaccess</code> or <code>public/.htaccess</code> est manquant. Assurez vous d'avoir activé les fichiers cachés et que le fichier est bien présent.",extension:"Vous pouvez essayer de faire cette commande pour installer les extensions PHP manquantes : <code>{command}</code><br>Une fois fait, redémarrez Apache ou Nginx.",function:"Vous devez activer cette fonction dans le fichier php.ini de PHP en modifiant la valeur de <code>disable_functions</code>."},missing:"Votre serveur n'a pas les pré-requis nécessaires pour installer Azuriom.",recheck:"Revérifier",success:"Votre serveur a les pré-requis pour installer Azuriom, vous pouvez continuer l'installation !"},download:{title:"Téléchargement",legal:'En continuant l\'installation, vous acceptez <a href="https://azuriom.com/terms" target="_blank" rel="noopener noreferrer">les CGU d\'Azuriom</a>.',go:"Télécharger"}};const ye={en:ze,fr:ke},qe=(0,o.o)({locale:navigator.language?navigator.language.split("-")[0]:"en",fallbackLocale:"en",messages:ye});(0,r.ri)(xe).use(qe).mount("#app")},9574:function(e,t,n){e.exports=n.p+"img/logo.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],i=e[u][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="https://cdn.jsdelivr.net/gh/Azuriom/AzuriomInstaller@1.0.0/dist/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,s=r[0],a=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var u=l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self["webpackChunkazuriom_installer"]=self["webpackChunkazuriom_installer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1282)}));r=n.O(r)})();
//# sourceMappingURL=app.js.map